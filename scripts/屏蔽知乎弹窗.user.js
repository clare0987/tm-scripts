// ==UserScript==
// @name         屏蔽知乎登录弹窗
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  屏蔽知乎弹窗
// @author       宇宙蜗牛
// @match        *://*.zhihu.com/*
// @icon         data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjY1OTg1OTg3MTMxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwNzQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQzMy44Mzg3MDQgNTY5LjE3MzU2NHMtMTc2LjU0Mjc4OC03My4wNDIyNTktMjU5LjE1MTI0Ny0zMjkuMTIyMDg0YzAgMC0xMjguMTAzOSAxNjkuODI0MDUyLTY2LjY3NTQ1NyAzNjAuMTU2MjQ2czEzNy4yNTQxNzkgMjM2Ljk3OTQxOCAxMzcuMjU0MTc5IDIzNi45Nzk0MTggMTk5LjEzMDUzOS0yMy45MzE0OTggMjU1LjUwMzkzNC0xMDEuMjI4OTU2YzAgMC02MS4xMDg1MDQtMjYuODc0OTQ0LTY2LjkzMTQwOS0xNjYuNzg0NjI0eiIgZmlsbD0iI0UwRUJGRSIgcC1pZD0iMjA3NSI+PC9wYXRoPjxwYXRoIGQ9Ik03NTQuNjQyMzUzIDM1NS4xMzM4M2EyNzQuNDEyMzc2IDI3NC40MTIzNzYgMCAwIDAtODYuOTI3NjQ3LTE1Ljk5Njk5IDU3NC42NzU4ODkgNTc0LjY3NTg4OSAwIDAgMC00OS43NTA2NC0yMjcuMDkzMjc4QzU5Ny4xOTk5NzIgNjUuNzE2Mjc3IDU3MS4zNDg4MzUgMjAuMzE2ODE4IDUyMy4zNTc4NjMgMi4wODAyNDlhMzEuNzcwMDIzIDMxLjc3MDAyMyAwIDAgMC0xNS41ODEwNjktMS43OTE2NjNDMzA2LjQzODY3MSAyNi45NzE1NjYgMTIxLjM4NTQ4NCAxODguOTI1MDk4IDc3LjI5Nzc3OCAzNzcuMDE3NzE0YTUxMS4yNjM4MTggNTExLjI2MzgxOCAwIDAgMC05LjY2MjE4MiAxNzYuOTkwNzAzYzE1LjQ4NTA4NyAxMzEuMzk5MjgxIDgxLjk2ODU4IDI1NS45NTE4NDkgMTgyLjM2NTY5MyAzNDEuNjk1NzE5IDkyLjQ2MjYwNSA3OC44OTcxNTcgMjE2LjkxOTE5MiAxMjguNDIzODQgMzM3Ljc5MjQ1MiAxMjguNDIzODQgOTguMTg5NTI4IDAgMTk0LjAxMTUwMi0zMi42NjU4NTUgMjY4LjQyOTUwMi0xMDguNzc5NTM2IDkwLjc5ODkxOC05Mi44MTQ1MzkgMTI1Ljc2ODM0LTIzMS41NDA0NDEgODkuMTk5MjE5LTM1My41MDE0OTctMjguNjY2NjA3LTk1LjQzODA0Ni0xMDEuNzQwODYtMTc0LjY4NzEzNy0xOTAuNzgwMTA5LTIwNi43MTMxMTN6IG0tMjQ3LjMxMzQ3NC0yOTAuMTUzNDE0YzIxLjE4MDAxNiAxMS41ODE4MjEgMzYuMzc3MTU3IDM3Ljg0ODg4IDUyLjI3ODE2NSA3My4yNjYyMTZhNTExLjEzNTg0MyA1MTEuMTM1ODQzIDAgMCAxIDQ0LjE4MzY4OCAyMDYuNzc3MWMtNDcuMjU1MTEgOS43OTAxNTgtOTEuNTAyNzg2IDMxLjU3ODA1OS0xMjUuOTYwMzA0IDY0LjAxOTk1Ny0zNy40OTY5NDYgMzUuMjU3MzY3LTYyLjEwMDMxNyA4MS45Njg1OC03Mi4wNTA0NDUgMTMxLjE0MzMyOC00NC4yNzk2Ny0yOC42MzQ2MTMtODUuMDQwMDAyLTY5LjM5NDk0NS0xMjEuMDMzMjMxLTEyMy4wODA4NDUtMzMuMDgxNzc2LTQ5LjM5ODcwNy01OS4yNTI4NTMtMTA0LjE3MjQwMy04My45NTIyMDYtMTU4LjM3MDIwNyA2OS44MTA4NjctOTkuMzczMzA1IDE4NC4wOTMzNjctMTc0Ljc1MTEyNSAzMDYuNTAyMzM5LTE5My43NTU1NDl6TTEzMS4yMDc2MzcgNTQ2LjU1MzgyYTQ0Ny4yNzU4NTYgNDQ3LjI3NTg1NiAwIDAgMSA4LjM4MjQyMy0xNTQuOTQ2ODUxYzguMTkwNDU5LTM0LjkzNzQyNyAyMi4zMzE3OTktNjguNzU1MDY1IDQwLjcyODMzOC0xMDAuNzE3MDUzIDIyLjc3OTcxNSA0OS4xNzQ3NDkgNDcuMzUxMDkyIDk4LjQ0NTQ4IDc3Ljg3MzM1IDE0NC4wMDQ5MDkgNDEuODQ4MTI3IDYyLjQ4NDI0NSA5MC4xMjcwNDUgMTA5LjA5OTQ3NiAxNDMuMjM3MDUzIDE0MC4yMjk2Mi0yLjIzOTU3OSAzOC4yNjQ4MDEgNC4yMjMyMDYgNzYuNjg5NTczIDIwLjYzNjExOCAxMTEuMjQzMDcyIDEwLjc0OTk3OCAyMi43MTU3MjcgMjUuODE5MTQzIDQyLjgwNzk0NyA0My4yODc4NTcgNjAuMTE2NjkxYTM1Ny44NTI2NzkgMzU3Ljg1MjY3OSAwIDAgMS0yMDcuNjQwOTM4IDY4LjIxMTE2N2MtNjkuMjY2OTY5LTcyLjc1NDMxMy0xMTQuNzYyNDEtMTY4LjE2MDM2NS0xMjYuNTA0MjAxLTI2OC4xNDE1NTV6IG01MzYuNTM5MDYzIDQwNC4yMTE5NTdjLTEyNi43NjAxNTMgMzAuNTIyMjU4LTI3My41NDg1MzktMTYuMTU2OTYtMzc2LjE4NTIzLTEwMy43NTY0ODEtMC41NDM4OTgtMC40Nzk5MS0wLjk5MTgxMy0xLjAyMzgwNy0xLjUzNTcxMS0xLjQ3MTcyM2EzODkuOTEwNjQ4IDM4OS45MTA2NDggMCAwIDAgMjAwLjI1MDMyOC03Ny44MDkzNjJjMzMuMzY5NzIyIDI0LjMxNTQyNiA3Mi44ODIyODkgMzkuMDMyNjU3IDExMy4xMzA3MTcgMzkuNTQ0NTYxYTE4MC40NDYwNTQgMTgwLjQ0NjA1NCAwIDAgMCA2Ny4yMTkzNTQtMTMuMDUzNTQ0YzEuOTgzNjI3IDUuODU0ODk5IDMuMTk5Mzk4IDEyLjQxMzY2NSA0LjA5NTIzIDE4LjY4NDQ4NGEzNzEuMjU4MTU3IDM3MS4yNTgxNTcgMCAwIDEtNi45NzQ2ODggMTM3Ljg2MjA2NXogbS02Mi4xNjQzMDUtMjA3LjQ0ODk3M2gtMS4zNDM3NDdjLTUwLjc3NDQ0OC0wLjYzOTg4LTEwMC43ODEwNDEtMzQuNTUzNS0xMjQuMzkyNTk5LTg0LjM2ODEyOS0zMC42ODIyMjgtNjQuNjI3ODQyLTEyLjcwMTYxMS0xNTIuMDM1Mzk4IDQxLjgxNjEzMy0yMDMuMjg5NzU2IDUzLjUyNTkzLTUwLjM1ODUyNiAxMzguMzczOTY4LTY2LjU3OTQ3NSAyMTEuMjg4MjUyLTQwLjMxMjQxNiA3LjM1ODYxNiAyLjYyMzUwNiAxNC40OTMyNzMgNS45MTg4ODcgMjEuNTMxOTQ5IDkuMzc0MjM2LTMxLjIyNjEyNiAxMi45NTc1NjItNTcuOTczMDk0IDM3LjA4MTAyNC03Mi45NDYyNzcgNjcuMjE5MzU1LTUuNTAyOTY1LTEuOTgzNjI3LTEwLjg3Nzk1NC00LjI4NzE5My0xNi42MDQ4NzYtNS41NjY5NTMtNDUuNjU1NDExLTEwLjA3ODEwNC05NS4xMTgxMDYgNC4xNTkyMTgtMTI1Ljk5MjI5OCAzNi4zNDUxNjMtMjkuMTE0NTIzIDMwLjMzMDI5NC0zOS44MzI1MDcgNzYuNTYxNTk3LTI3LjM4Njg0OCAxMTcuODAxODM4IDExLjE5Nzg5MyAzNi45NTMwNDggMzguNzEyNzE3IDYyLjgzNjE3OSA3NS41Njk3ODQgNzEuMDI2NjM4IDM2LjY2NTEwMiA4LjIyMjQ1MyA3Ni4xNDU2NzUtNS45MTg4ODcgMTAwLjY1MzA2NC0zNS45NjEyMzUgMjAuMjIwMTk2LTI0Ljc5NTMzNSAyNi4xNzEwNzctNTUuOTg5NDY3IDE2LjcwMDg1OC04NS4xNjc5NzcgMTIuNjY5NjE3IDIxLjY1OTkyNSAxNy4xMTY3OCA0Ny40NzkwNjggMTEuOTAxNzYxIDY5LjY4Mjg5MS0xMS4xMzM5MDUgNDYuOTAzMTc2LTU5LjYzNjc4MSA4My4xODQzNTEtMTEwLjc5NTE1NiA4My4xODQzNTF6IG0zNi44MjUwNzItMTM2LjE5ODM3OGM0LjM4MzE3NSA5Ljc1ODE2NCAyLjk3NTQ0IDE5LjE5NjM4OS00LjIyMzIwNSAyOC4wMjY3MjctOS4wNTQyOTcgMTEuMDY5OTE3LTI0LjMxNTQyNiAxNi43MzI4NTItMzcuMjA5IDEzLjk0OTM3Ni0xNy42NjA2NzgtMy45MzUyNi0yNS4wODMyODEtMTYuOTI0ODE2LTI4LjE1NDcwNC0yNy4xMzA4OTYtNS42OTQ5MjktMTguODQ0NDU1LTAuNjM5ODgtNDEuNDMyMjA2IDEyLjI4NTY4OS01NC45MzM2NjYgMTIuMTU3NzEzLTEyLjY2OTYxNyAzMS4wMzQxNjItMTkuODY4MjYyIDUwLjE2NjU2Mi0xOS44NjgyNjIgNS4zMTEwMDEgMCAxMC42NTM5OTYgMC41NDM4OTggMTUuODM3MDIxIDEuNjk1NjgxIDEwLjg3Nzk1NCAyLjM5OTU0OSAyMS4xODAwMTYgNy40NTQ1OTggMzAuMzYyMjg4IDE0LjcxNzIzMmEzMS45OTM5ODEgMzEuOTkzOTgxIDAgMCAwLTM5LjAzMjY1NyA0My41MTE4MTR6IG0xNjguMDk2Mzc3IDI2My40NzA0MzRhMjg5Ljg5NzQ2MyAyODkuODk3NDYzIDAgMCAxLTEwNy4yNzU4MTkgNjkuMjk4OTY0YzguMTU4NDY1LTQzLjMxOTg1IDkuMzc0MjM2LTg4LjA3OTQzIDMuMTk5Mzk4LTEzMS40OTUyNjMtMS4yNzk3NTktOC45NTgzMTUtMy4yMzEzOTItMTguOTcyNDMxLTcuMDM4Njc2LTI4LjQ3NDY0MyAzOC45MDQ2ODEtMjMuNzM5NTM0IDY4Ljc1NTA2NS02MC44MjA1NTggNzkuMjQ5MDkyLTEwNS4xMDAyMjggMi4yMzk1NzktOS41MDIyMTIgMy4zNTkzNjgtMTkuMjkyMzcxIDMuNjc5MzA4LTI5LjExNDUyMyAyMC43NjQwOTQgMC40NDc5MTYgMzkuOTkyNDc2IDcuNzc0NTM3IDUzLjUyNTkzIDE1LjAzNzE3MSAyMC4zNDgxNzIgMTAuODc3OTU0IDM4Ljg0MDY5MyAyNi4yMDMwNzEgNTYuNjkzMzM1IDQxLjY1NjE2NC04LjgzMDMzOSA2Mi4xNjQzMDUtMzYuODg5MDYgMTIyLjA1NzAzOC04Mi4wMzI1NjggMTY4LjE5MjM1OHogbTQwLjQwODM5OC0yMzguMDY3MjEzYy0xNy40Njg3MTQtOS4zNDIyNDItNDIuNzQzOTU5LTE4LjY4NDQ4NS03MC43NzA2ODYtMTguNjIwNDk3YTE2Ni45MTI2IDE2Ni45MTI2IDAgMCAwLTIzLjA5OTY1NS02MC4xNDg2ODUgMTU1LjA0MjgzMyAxNTUuMDQyODMzIDAgMCAwLTQ2LjkwMzE3Ni00Ny42NzEwMzIgMTA5LjY0MzM3MyAxMDkuNjQzMzczIDAgMCAxIDgxLjEwNDc0Mi01OC43MDg5NTUgMjYwLjc1MDk0NiAyNjAuNzUwOTQ2IDAgMCAxIDkyLjg3ODUyOCAxMzIuODcxMDA0YzguMDk0NDc3IDI2Ljk3MDkyNiAxMS41NDk4MjcgNTQuOTAxNjcyIDExLjM1Nzg2MyA4Mi44NjQ0MTFhMjgxLjI5MTA4MiAyODEuMjkxMDgyIDAgMCAwLTQ0LjU2NzYxNi0zMC41ODYyNDZ6IiBmaWxsPSIjNTQ2NUNGIiBwLWlkPSIyMDc2Ij48L3BhdGg+PC9zdmc+
// @require      https://cdn.staticfile.org/jquery/3.6.1/jquery.min.js
// @grant        none
// @updateURL    none
// ==/UserScript==

(function() {
  'use strict';
  
  const readyLoginObserver = new MutationObserver((mutationsList, observer) => {
    mutationsList.forEach(mutations => {
      if(mutations.type === 'childList' && mutations.addedNodes.length > 0) {
        mutations.addedNodes.forEach(node => {
          if(node.localName !== 'script') {
            const $loginClose = $(node).find('Button.Modal-closeButton');
            if($loginClose && $loginClose.length) {
              $loginClose.click();
              observer.disconnect();
            }
          }
        });
      }
    });
  });

  const tipLoginObserver = new MutationObserver((mutationsList, observer) => {
    mutationsList.forEach(mutations => {
      if(mutations.type === 'childList' && mutations.addedNodes.length > 0) {
        mutations.addedNodes.forEach(node => {
          if(node.localName !== 'script') {
            const $loginTip = $(node).find('div.css-1ynzxqw');
            if($loginTip && $loginTip.length) {
              $loginTip.remove();
            }
          }
        });
      }
    });
  });
  readyLoginObserver.observe(document.querySelector('body'), { childList: true });
  tipLoginObserver.observe(document.querySelector('body'), { childList: true });
})();